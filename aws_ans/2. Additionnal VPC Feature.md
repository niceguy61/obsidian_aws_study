## 2. Additionnal VPC Feature

### Extending VPC Address Space
#### **주요 개념**

1. **CIDR 블록 추가**:
	- AWS에서는 VPC에 최대 5개의 추가 CIDR 블록을 할당할 수 있음.
	- IPv4 CIDR 블록은 `/16`에서 `/28`까지 지원.
	- 추가된 CIDR은 기존 CIDR과 중복되지 않아야 함.
2. **IPv6 지원**:
	- AWS에서 할당된 IPv6 CIDR 블록은 `/56`로 고정.
	- IPv6는 전역적으로 고유하며, 프라이빗 네트워크와 퍼블릭 네트워크 모두에서 사용 가능.
3. **사용 사례**:
	- 리소스 증가로 기존 서브넷의 IP 주소가 부족할 때 CIDR 확장 필요.
	- 새로운 워크로드를 지원하기 위해 추가 서브넷을 구성해야 할 경우.
4. **제약 조건**:
	- 추가된 CIDR 블록은 원래의 VPC CIDR과 동일한 RFC 1918 범위여야 함.
	- CIDR 블록 변경은 실시간 트래픽에 영향을 미치지 않음.

#### **장점**
- 기존 리소스를 중단하지 않고 VPC 주소 공간 확장 가능.
- 유연한 네트워크 설계를 통해 리소스 증가에 대응 가능.
- IPv6 CIDR 블록을 활용하여 향후 확장성 확보.

#### **단점**
- CIDR 충돌 방지 규칙을 수동으로 관리해야 함.
- 잘못된 CIDR 설계는 복잡성을 초래할 수 있음.

![[ans/image/add_vpc_cidr.png]]![[add_vpc_cidr 1.png]]

### ENI
![[add_vpc_eni.png]]
#### **요약**
Elastic Network Interface (ENI)는 Amazon VPC의 가상 네트워크 카드로, EC2 인스턴스에 네트워크 연결을 제공하는 중요한 구성 요소입니다. ENI는 네트워크 트래픽을 유연하게 관리하고 고가용성을 지원하기 위한 다양한 기능을 제공합니다.

---

#### **주요 개념**

1. **ENI의 정의 및 역할**:
	- ENI는 VPC 내부에서 IP 주소와 네트워크 연결을 관리하는 네트워크 어댑터.
	- 인스턴스와 분리 가능하며, 한 ENI를 다른 EC2 인스턴스에 연결할 수 있음.
2. **ENI의 주요 구성 요소**:
	- **기본 NIC**: EC2 인스턴스 생성 시 자동으로 생성되며 기본 NIC로 설정.
	- **보안 그룹**: ENI 수준에서 보안 그룹을 설정하여 트래픽 제어.
	- **Private IP 및 Elastic IP**: ENI는 하나 이상의 프라이빗 IP를 가질 수 있으며, EIP와 연결 가능.
3. **ENI의 활용 사례**:
	- **다중 네트워크 구성**: 단일 인스턴스에 여러 ENI를 추가하여 다중 네트워크 연결 구성.
	- **고가용성 및 장애 복구**: 장애 시 ENI를 다른 인스턴스로 연결하여 빠른 복구 지원.
	- **애플리케이션 분리**: 한 인스턴스에서 여러 네트워크 구성을 분리하여 운영.
4. **고급 사용 사례**:
	- **ENI Trunking**: 고밀도 워크로드에서 다중 ENI를 사용하여 IP 주소 확장.
	- **ENI의 이동성**: ENI를 하나의 인스턴스에서 다른 인스턴스로 이동 가능.

---

#### **장점**

- 네트워크 구성을 유연하게 변경할 수 있음.
- 다중 네트워크를 통해 분리된 트래픽을 처리 가능.
- ENI의 분리 및 이동성을 통해 장애 복구 및 유지보수에 용이.

#### **단점**

- ENI의 설정과 관리는 사용자가 직접 수행해야 하므로 복잡성이 증가할 수 있음.
- 네트워크 처리량은 EC2 인스턴스 유형에 따라 제한될 수 있음.

---

![[add_vpc_eni_max.png]]
![[add_vpc_eni_rds.png]]
![[add_vpc_eni_dual_home.png]]
![[add_vpc_eni_ha.png]]
![[add_vpc_eni_eks_pods.png]]

### Bring Your Own IP (BYOIP)
#### **요약**

**Bring Your Own IP (BYOIP)**는 고객이 소유한 IP 주소를 AWS로 가져와 AWS 서비스와 통합해 사용할 수 있게 해주는 기능입니다. 이 기능은 클라우드로의 전환 시 네트워크 변경을 최소화하고 고객이 기존 IP 주소를 유지할 수 있도록 돕습니다.

---

#### **주요 개념**

1. **BYOIP의 정의**:
	
	- 고객이 소유한 IPv4 또는 IPv6 주소를 AWS로 이전하여 Amazon VPC 및 AWS Global Accelerator와 같은 서비스에서 사용 가능.
	- IP 주소는 AWS 리전에 매핑되어 AWS 네트워크에서 활용.
2. **주요 사용 사례**:
	
	- 기존 IP 주소를 사용하는 고객들에게 클라우드 전환 간소화.
	- 기업이 자체 IP 주소를 유지하여 DNS 변경 없이 마이그레이션 가능.
	- 규제 요건 충족을 위해 특정 IP 주소 유지.
3. **프로세스**:
	
	- **검증**: 고객의 IP 주소 소유권을 AWS에 검증.
	- **광고**: AWS의 네트워크에서 IP 주소가 광고되도록 설정.
	- **사용**: AWS 서비스에서 IP 주소를 사용(예: Elastic Load Balancer, EC2).
4. **BYOIP의 주요 제약 조건**:
	
	- AWS가 고객의 IP 소유권을 확인하기 위한 검증 절차 필요.
	- IPv4는 AWS 리전에서 BYOIP를 지원하며, IPv6은 글로벌 네트워크에서 지원.
	- IP 주소가 AWS 외부에서 사용 중인 경우 일부 제한 가능.

---

#### **장점**

- 클라우드로 전환 시 기존 네트워크 설정을 유지 가능.
- IP 주소의 소유권과 유연성을 유지하며 AWS 리소스를 활용.
- 네트워크 구성의 변경이 최소화되어 다운타임 감소.

#### **단점**

- BYOIP 설정 및 소유권 검증에는 시간이 걸릴 수 있음.
- AWS 환경 외부에서 사용하는 IP와의 통합은 추가 작업이 필요할 수 있음.